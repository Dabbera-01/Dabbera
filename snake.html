<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dabba Snake - Dabbera</title>
<style>
body {margin:0; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; background: linear-gradient(135deg,#1e90ff,#ff4757); font-family:'Arial Black',sans-serif; color:white;}
canvas {border:3px solid white; border-radius:15px;}
button {margin-top:15px;padding:12px 25px;border:none;border-radius:10px;background:#00c6ff;color:white;font-size:18px;cursor:pointer;}
</style>
</head>
<body>
<h1>üì¶ Dabba Snake</h1>
<canvas id="gameCanvas" width="400" height="400"></canvas>
<button onclick="location.href='index.html'">‚¨ÖÔ∏è Back to Hub</button>

<script>
const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d');

const grid=20;
let snake=[{x:8,y:8}];
let direction='right';
let food={x:5,y:5};
let score=0;
let speed=200; // slower

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // Food
  ctx.fillStyle='red';
  ctx.fillRect(food.x*grid,food.y*grid,grid,grid);

  // Snake
  ctx.fillStyle='lime';
  snake.forEach(s=>ctx.fillRect(s.x*grid,s.y*grid,grid,grid));

  ctx.fillStyle='white';
  ctx.font='16px Arial';
  ctx.fillText('Score: '+score,10,20);
}

function update(){
  // Move snake
  const head={...snake[0]};
  if(direction==='left') head.x--;
  if(direction==='right') head.x++;
  if(direction==='up') head.y--;
  if(direction==='down') head.y++;

  // Wrap edges
  if(head.x<0) head.x=canvas.width/grid-1;
  if(head.x>=canvas.width/grid) head.x=0;
  if(head.y<0) head.y=canvas.height/grid-1;
  if(head.y>=canvas.height/grid) head.y=0;

  // Check self collision
  if(snake.some(s=>s.x===head.x && s.y===head.y)){ alert('Game Over! Score: '+score); resetGame(); return; }

  snake.unshift(head);

  // Eat food
  if(head.x===food.x && head.y===food.y){
    score++;
    spawnFood();
  } else {
    snake.pop();
  }

  draw();
}

function spawnFood(){
  food={x:Math.floor(Math.random()*(canvas.width/grid)), y:Math.floor(Math.random()*(canvas.height/grid))};
}

function resetGame(){
  snake=[{x:8,y:8}];
  direction='right';
  score=0;
}

document.addEventListener('keydown',e=>{
  if(e.key==='ArrowUp' && direction!=='down') direction='up';
  if(e.key==='ArrowDown' && direction!=='up') direction='down';
  if(e.key==='ArrowLeft' && direction!=='right') direction='left';
  if(e.key==='ArrowRight' && direction!=='left') direction='right';
});

// Swipe controls for mobile
let touchStartX=0,touchStartY=0;
canvas.addEventListener('touchstart',e=>{
  touchStartX=e.touches[0].clientX;
  touchStartY=e.touches[0].clientY;
});
canvas.addEventListener('touchend',e=>{
  const dx=e.changedTouches[0].clientX-touchStartX;
  const dy=e.changedTouches[0].clientY-touchStartY;
  if(Math.abs(dx)>Math.abs(dy)){
    if(dx>0 && direction!=='left') direction='right';
    else if(dx<0 && direction!=='right') direction='left';
  } else{
    if(dy>0 && direction!=='up') direction='down';
    else if(dy<0 && direction!=='down') direction='up';
  }
});

setInterval(update,speed);
</script>

<script>
(function() {
  const faviconURL = 'favicon.gif'; // your animated GIF
  let link = document.querySelector("link[rel~='icon']");
  if (!link) {
    link = document.createElement('link');
    link.rel = 'icon';
    document.head.appendChild(link);
  }

  // For animated effect using a tiny trick (works in most browsers)
  let i = 0;
  const frames = 30; // total frames your GIF has, approx
  setInterval(() => {
    link.href = faviconURL + '?frame=' + i;
    i = (i + 1) % frames;
  }, 100); // change frame every 100ms
})();
</script>

<div id="musicPlayer" style="position:fixed;bottom:10px;right:10px;z-index:9999;">
  <button onclick="togglePlayer()">üéµ</button>
  <iframe id="spotifyIframe" 
      style="border-radius:12px;margin-top:5px;" 
      src="https://open.spotify.com/embed/playlist/0PMKjSoU937cvzkHpFJ3hf?utm_source=generator&theme=0" 
      width="300" height="80" frameborder="0" allow="encrypted-media">
  </iframe>
</div>

<script>
function togglePlayer(){
  const iframe = document.getElementById('spotifyIframe');
  iframe.style.display = (iframe.style.display==='none') ? 'block':'none';
}
</script>


</body>
</html>
